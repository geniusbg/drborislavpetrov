<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regex Debug Test</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        .info { background: #d1ecf1; border-color: #bee5eb; }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 10px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Regex Debug Test</h1>
        
        <div class="test-section info">
            <h3>üìã –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ regex patterns:</h3>
            <input type="text" id="testCommand" placeholder="–í—ä–≤–µ–¥–µ—Ç–µ –∫–æ–º–∞–Ω–¥–∞ –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ..." value="–∏–∑—Ç—Ä–∏–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –ü–µ—à–æ –ü–µ—à–æ">
            <button onclick="testCommand()">üß™ –¢–µ—Å—Ç–≤–∞–π –∫–æ–º–∞–Ω–¥–∞</button>
        </div>

        <div class="test-section">
            <h3>üìä –†–µ–∑—É–ª—Ç–∞—Ç–∏:</h3>
            <div id="log" class="log"></div>
        </div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.textContent += `[${timestamp}] ${message}\n`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function testCommand() {
            const command = document.getElementById('testCommand').value;
            log('üé§ === TESTING COMMAND ===');
            log(`üìù Input: "${command}"`);
            
            const patterns = {
                addUser: /–¥–æ–±–∞–≤–∏\s+–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª\s+(.+?)(?:\s+—Ç–µ–ª–µ—Ñ–æ–Ω\s+([^\s]+))?(?:\s+–∏–º–µ–π–ª\s+([^\s]+))?/i,
                updateUser: /–ø—Ä–æ–º–µ–Ω–∏\s+–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª\s+(.+?)(?:\s+—Ç–µ–ª–µ—Ñ–æ–Ω\s+([^\s]+))?(?:\s+–∏–º–µ–π–ª\s+([^\s]+))?/i,
                deleteUser: /–∏–∑—Ç—Ä–∏–π\s+–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª\s+(.+?)(?:\s|$)/i,
                addBooking: /–¥–æ–±–∞–≤–∏\s+—Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è\s+(.+?)(?:\s+–¥–∞—Ç–∞\s+([^\s]+))?(?:\s+—á–∞—Å\s+([^\s]+))?(?:\s+—É—Å–ª—É–≥–∞\s+([^\s]+))?/i,
                updateBooking: /–ø—Ä–æ–º–µ–Ω–∏\s+—Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è\s+(.+?)(?:\s+–¥–∞—Ç–∞\s+([^\s]+))?(?:\s+—á–∞—Å\s+([^\s]+))?/i,
                cancelBooking: /–æ—Ç–º–µ–Ω–∏\s+—Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è\s+(.+?)(?:\s+–¥–∞—Ç–∞\s+([^\s]+))?/i,
                deleteBooking: /–∏–∑—Ç—Ä–∏–π\s+—Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è\s+(.+?)(?:\s+–¥–∞—Ç–∞\s+([^\s]+))?/i,
                checkAvailability: /–ø—Ä–æ–≤–µ—Ä–∏\s+—Å–≤–æ–±–æ–¥–Ω–∏\s+—á–∞—Å–æ–≤–µ(?:\s+–∑–∞\s+([^\s]+))?/i,
                showBookings: /–ø–æ–∫–∞–∂–∏\s+—Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏\s+–∑–∞\s+([^\s]+)/i,
            };

            let matched = false;
            
            for (const [action, pattern] of Object.entries(patterns)) {
                log(`üîç Testing pattern: ${action}`);
                log(`üìã Pattern: ${pattern}`);
                
                const match = command.match(pattern);
                if (match) {
                    log(`‚úÖ Pattern matched: ${action}`);
                    log(`üìã Match groups: ${JSON.stringify(match, null, 2)}`);
                    
                    const result = {
                        action: action,
                        originalCommand: command
                    };

                    // Extract parameters based on action
                    switch (action) {
                        case 'addUser':
                        case 'updateUser':
                            result.name = match[1]?.trim();
                            result.phone = match[2]?.trim();
                            result.email = match[3]?.trim();
                            break;
                        case 'deleteUser':
                            result.name = match[1]?.trim();
                            break;
                        case 'addBooking':
                            result.name = match[1]?.trim();
                            result.date = match[2]?.trim();
                            result.time = match[3]?.trim();
                            result.service = match[4]?.trim();
                            break;
                        case 'updateBooking':
                            result.name = match[1]?.trim();
                            result.date = match[2]?.trim();
                            result.time = match[3]?.trim();
                            break;
                        case 'cancelBooking':
                        case 'deleteBooking':
                            result.name = match[1]?.trim();
                            result.date = match[2]?.trim();
                            break;
                        case 'checkAvailability':
                            result.date = match[1]?.trim();
                            break;
                        case 'showBookings':
                            result.date = match[1]?.trim();
                            break;
                    }

                    log(`üì§ Parsed result: ${JSON.stringify(result, null, 2)}`);
                    matched = true;
                    break;
                } else {
                    log(`‚ùå No match for ${action}`);
                }
            }

            if (!matched) {
                log('‚ùå No pattern matched');
            }
            
            log('================================');
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ç–µ—Å—Ç–≤–∞–Ω–µ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ
        window.onload = () => {
            log('üöÄ Regex debug test –≥–æ—Ç–æ–≤');
            log('–ö–ª–∏–∫–Ω–µ—Ç–µ "–¢–µ—Å—Ç–≤–∞–π –∫–æ–º–∞–Ω–¥–∞" –∏–ª–∏ –ø—Ä–æ–º–µ–Ω–µ—Ç–µ –∫–æ–º–∞–Ω–¥–∞—Ç–∞ –∏ —Ç–µ—Å—Ç–≤–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ');
        };
    </script>
</body>
</html> 