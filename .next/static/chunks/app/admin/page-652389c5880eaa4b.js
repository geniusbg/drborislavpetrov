(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{6792:function(e,s,t){Promise.resolve().then(t.bind(t,4122))},9763:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(e,s)=>{let t=(0,a.forwardRef)((t,n)=>{let{color:i="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:o,children:m,...x}=t;return(0,a.createElement)("svg",{ref:n,...r,width:c,height:c,stroke:i,strokeWidth:o?24*Number(d)/Number(c):d,className:"lucide lucide-".concat(l(e)),...x},[...s.map(e=>{let[s,t]=e;return(0,a.createElement)(s,t)}),...(Array.isArray(m)?m:[m])||[]])});return t.displayName="".concat(e),t}},1047:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1723:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9345:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3041:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3388:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},2369:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4122:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return E}});var a=t(7437),r=t(2265),l=t(1047),n=t(9763);let i=(0,n.Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),c=(0,n.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),d=(0,n.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),o=(0,n.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var m=t(3388),x=t(1723);let h=(0,n.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var u=t(5805);let p=(0,n.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),g=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),y=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var b=e=>{var s;let{service:t,onSubmit:l,onCancel:n}=e,[i,c]=(0,r.useState)({name:(null==t?void 0:t.name)||"",description:(null==t?void 0:t.description)||"",duration:(null==t?void 0:t.duration)||30,price:(null==t?void 0:t.price)||0,isActive:null===(s=null==t?void 0:t.isActive)||void 0===s||s});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l(i)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Име на услугата"}),(0,a.jsx)("input",{type:"text",value:i.name,onChange:e=>c({...i,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Описание"}),(0,a.jsx)("textarea",{value:i.description,onChange:e=>c({...i,description:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Продължителност (минути)"}),(0,a.jsx)("input",{type:"number",value:i.duration,onChange:e=>c({...i,duration:parseInt(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",min:"15",step:"15",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Цена (лв.)"}),(0,a.jsx)("input",{type:"number",value:i.price,onChange:e=>c({...i,price:parseFloat(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",min:"0",step:"0.01"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:i.isActive,onChange:e=>c({...i,isActive:e.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,a.jsx)("label",{className:"ml-2 block text-sm text-gray-900",children:"Активна услуга"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Отказ"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:t?"Запази":"Добави"})]})]})},j=e=>{let{booking:s,onSubmit:t,onCancel:l}=e,[n,i]=(0,r.useState)([]),[c,d]=(0,r.useState)({name:(null==s?void 0:s.name)||"",email:(null==s?void 0:s.email)||"",phone:(null==s?void 0:s.phone)||"",service:(null==s?void 0:s.service)||"",date:(null==s?void 0:s.date)||"",time:(null==s?void 0:s.time)||"",message:(null==s?void 0:s.message)||"",status:(null==s?void 0:s.status)||"pending"});return(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/services");if(e.ok){let s=await e.json();i(s.services)}}catch(e){console.error("Error loading services:",e)}})()},[]),(0,r.useEffect)(()=>{s?d({name:s.name||"",email:s.email||"",phone:s.phone||"",service:s.service||"",date:s.date||"",time:s.time||"",message:s.message||"",status:s.status||"pending"}):d({name:"",email:"",phone:"",service:"",date:"",time:"",message:"",status:"pending"})},[s]),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(c)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Име *"}),(0,a.jsx)("input",{type:"text",value:c.name,onChange:e=>d({...c,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Телефон *"}),(0,a.jsx)("input",{type:"tel",value:c.phone,onChange:e=>d({...c,phone:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Имейл"}),(0,a.jsx)("input",{type:"email",value:c.email,onChange:e=>d({...c,email:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Услуга *"}),(0,a.jsxs)("select",{value:c.service,onChange:e=>d({...c,service:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Изберете услуга"}),n.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.duration," мин.)"]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Статус"}),(0,a.jsxs)("select",{value:c.status,onChange:e=>d({...c,status:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"pending",children:"Чакаща"}),(0,a.jsx)("option",{value:"confirmed",children:"Потвърдена"}),(0,a.jsx)("option",{value:"cancelled",children:"Отменена"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Дата *"}),(0,a.jsx)("input",{type:"date",value:c.date,onChange:e=>d({...c,date:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Час *"}),(0,a.jsx)("input",{type:"time",value:c.time,onChange:e=>d({...c,time:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Съобщение"}),(0,a.jsx)("textarea",{value:c.message,onChange:e=>d({...c,message:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",rows:3})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Отказ"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Запази"})]})]})},f=e=>{let{user:s,onSubmit:t,onCancel:l}=e,[n,i]=(0,r.useState)({name:"",email:"",phone:"",address:"",notes:""});(0,r.useEffect)(()=>{s&&i(s)},[s]);let c=e=>{let{name:s,value:t}=e.target;i(e=>({...e,[s]:t}))};return(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!n.name.trim()||!n.phone.trim()){alert("Името и телефонът са задължителни!");return}t(n)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Име *"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:n.name,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Имейл"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефон *"}),(0,a.jsx)("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:c,required:!0,placeholder:"+359888123456",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Адрес"}),(0,a.jsx)("textarea",{id:"address",name:"address",value:n.address,onChange:c,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Бележки"}),(0,a.jsx)("textarea",{id:"notes",name:"notes",value:n.notes,onChange:c,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Отказ"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:s?"Запази":"Добави"})]})]})})};let v=(0,n.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),N=(0,n.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var w=t(2369),k=t(3041),C=e=>{let{bookings:s,onBookingClick:t}=e,[n,i]=(0,r.useState)(new Date),[c,d]=(0,r.useState)(null),[o,m]=(0,r.useState)("all"),[h,u]=(0,r.useState)(null),[p,g]=(0,r.useState)(null),y=s.filter(e=>"all"===o||e.status===o),b=new Date(n.getFullYear(),n.getMonth(),1),j=new Date(n.getFullYear(),n.getMonth()+1,0),f=new Date(b),C=b.getDay();f.setDate(f.getDate()-(0===C?6:C-1));let S=new Date(j),Z=j.getDay();S.setDate(S.getDate()+(0===Z?0:7-Z));let T=[],D=new Date(f);for(;D<=S;)T.push(new Date(D)),D.setDate(D.getDate()+1);let E=y.reduce((e,s)=>{let t=s.date;return e[t]||(e[t]=[]),e[t].push(s),e},{}),M=e=>{let s=new Date;return e.toDateString()===s.toDateString()},I=e=>e.getMonth()===n.getMonth(),A=e=>(E[e.toISOString().split("T")[0]]||[]).sort((e,s)=>e.time.localeCompare(s.time)),L=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},F=e=>{switch(e){case"confirmed":return"Потвърдена";case"pending":return"Чакаща";case"cancelled":return"Отменена";default:return e}},P=e=>{d(e)},O=e=>{"prev"===e?i(new Date(n.getFullYear(),n.getMonth()-1,1)):i(new Date(n.getFullYear(),n.getMonth()+1,1))};return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Календар"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>O("prev"),className:"p-2 sm:p-3 rounded-lg hover:bg-gray-100 transition-colors touch-manipulation",children:(0,a.jsx)(v,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-600"})}),(0,a.jsx)("div",{className:"text-center min-w-[140px] sm:min-w-[180px]",children:(0,a.jsxs)("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:[["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"][n.getMonth()]," ",n.getFullYear()]})}),(0,a.jsx)("button",{onClick:()=>O("next"),className:"p-2 sm:p-3 rounded-lg hover:bg-gray-100 transition-colors touch-manipulation",children:(0,a.jsx)(N,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-600"})})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"flex space-x-2 overflow-x-auto scrollbar-hide",children:["all","pending","confirmed","cancelled"].map(e=>(0,a.jsx)("button",{onClick:()=>m(e),className:"flex-shrink-0 px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat(o===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"all"===e?"Всички":"pending"===e?"Чакащи":"confirmed"===e?"Потвърдени":"Отменени"},e))})})]}),(0,a.jsxs)("div",{className:"p-4 sm:p-6",onTouchStart:e=>{g(null),u(e.targetTouches[0].clientX)},onTouchMove:e=>{g(e.targetTouches[0].clientX)},onTouchEnd:()=>{if(!h||!p)return;let e=h-p;e>50?i(new Date(n.getFullYear(),n.getMonth()+1,1)):e<-50&&i(new Date(n.getFullYear(),n.getMonth()-1,1))},children:[(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Пн","Вт","Ср","Чт","Пт","Сб","Нд"].map(e=>(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"text-xs sm:text-sm font-medium text-gray-500 py-2",children:e})},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:T.map((e,s)=>{let r=A(e),l=c&&c.toDateString()===e.toDateString();return(0,a.jsxs)("div",{onClick:()=>P(e),className:"\n                  relative min-h-[60px] sm:min-h-[80px] p-1 sm:p-2 rounded-lg cursor-pointer transition-all duration-200\n                  ".concat(M(e)?"bg-blue-50 border-2 border-blue-200":"","\n                  ").concat(l?"bg-blue-100 border-2 border-blue-300":"","\n                  ").concat(I(e)?"text-gray-900":"text-gray-400","\n                  ").concat(!I(e)||M(e)||l?"":"hover:bg-gray-50","\n                  touch-manipulation\n                "),children:[(0,a.jsx)("div",{className:"text-xs sm:text-sm font-medium mb-1",children:e.getDate()}),r.length>0&&(0,a.jsxs)("div",{className:"space-y-1",children:[r.slice(0,2).map((e,s)=>(0,a.jsxs)("div",{onClick:s=>{s.stopPropagation(),t(e)},className:"\n                          text-xs px-1 py-0.5 rounded border truncate\n                          ".concat(L(e.status),"\n                          touch-manipulation\n                        "),title:"".concat(e.name," - ").concat(e.time," - ").concat(F(e.status)),children:[e.time," - ",e.name]},s)),r.length>2&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["+",r.length-2," още"]})]})]},s)})})]}),c&&(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:c.toLocaleDateString("bg-BG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,a.jsx)("button",{onClick:()=>d(null),className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:(0,a.jsx)("span",{className:"text-gray-500",children:"✕"})})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[A(c).map(e=>(0,a.jsxs)("div",{onClick:()=>t(e),className:"\n                  p-3 rounded-lg border cursor-pointer transition-colors\n                  ".concat(L(e.status),"\n                  hover:shadow-sm touch-manipulation\n                "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"font-medium",children:e.time})]}),(0,a.jsx)("span",{className:"text-xs font-medium",children:F(e.status)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:e.phone})]}),e.serviceName&&(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Услуга: ",e.serviceName]})]})]},e.id)),0===A(c).length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(l.Z,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{children:"Няма резервации за този ден"})]})]})]})]})},S=t(9345),Z=t(2489);let T=(0,n.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);var D=e=>{let{user:s,bookings:t,onClose:n,onUpdateTreatmentNotes:i,onEditBooking:c}=e,[d,o]=(0,r.useState)(null),[m,h]=(0,r.useState)(""),u=t.filter(e=>e.phone===s.phone),g=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},y=e=>{switch(e){case"confirmed":return"Потвърдена";case"pending":return"Чакаща";case"cancelled":return"Отменена";default:return e}},b=e=>{o(e.id),h(e.treatment_notes||"")},j=async()=>{d&&m.trim()&&(await i(d,m),o(null),h(""))},f=()=>{o(null),h("")};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(w.Z,{className:"w-6 h-6 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:s.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:s.phone})]}),s.email&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:s.email})]})]})]})]}),(0,a.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(Z.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Информация за потребителя"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Име:"})," ",s.name]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Телефон:"})," ",s.phone]}),s.email&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Email:"})," ",s.email]}),s.address&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Адрес:"})," ",s.address]}),s.notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Бележки:"})," ",s.notes]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center space-x-2",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5"}),(0,a.jsxs)("span",{children:["История на резервациите (",u.length,")"]})]}),0===u.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Няма резервации за този потребител"}):(0,a.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium",children:e.date})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium",children:e.time})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(g(e.status)),children:y(e.status)})]}),c&&(0,a.jsxs)("button",{onClick:()=>c(e),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center space-x-1 px-2 py-1 rounded-md hover:bg-blue-50",title:"Редактирай резервацията",children:[(0,a.jsx)(p,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Редактирай"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("span",{className:"font-medium",children:"Услуга:"})," ",e.serviceName||"Услуга ".concat(e.service)]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("span",{className:"font-medium",children:"Статус:"}),(0,a.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium ".concat(g(e.status)),children:y(e.status)})]}),(0,a.jsxs)("div",{className:"mb-3 text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Създадена на:"})," ",new Date(e.createdAt).toLocaleDateString("bg-BG")," в ",new Date(e.createdAt).toLocaleTimeString("bg-BG",{hour:"2-digit",minute:"2-digit"})]}),e.message&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("span",{className:"font-medium",children:"Съобщение:"}),(0,a.jsxs)("p",{className:"text-gray-700 mt-1 italic",children:['"',e.message,'"']})]}),(0,a.jsxs)("div",{className:"border-t pt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium flex items-center space-x-2",children:[(0,a.jsx)(T,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Бележки за лечението"})]}),d!==e.id&&(0,a.jsxs)("button",{onClick:()=>b(e),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center space-x-1",children:[(0,a.jsx)(p,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Редактирай"})]})]}),d===e.id?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("textarea",{value:m,onChange:e=>h(e.target.value),className:"w-full p-2 border rounded-md resize-none",rows:3,placeholder:"Въведете бележки за лечението..."}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:j,className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",children:"Запази"}),(0,a.jsx)("button",{onClick:f,className:"px-3 py-1 bg-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-400",children:"Отмени"})]})]}):(0,a.jsx)("div",{className:"text-gray-700",children:e.treatment_notes?(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.treatment_notes}):(0,a.jsx)("p",{className:"text-gray-500 italic",children:"Няма бележки за лечението"})})]})]},e.id))})]})]})]})})},E=()=>{let[e,s]=(0,r.useState)(()=>localStorage.getItem("adminActiveTab")||"bookings"),[t,n]=(0,r.useState)(!0),[v,N]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),[S,Z]=(0,r.useState)([]),[T,E]=(0,r.useState)(null),[M,I]=(0,r.useState)(null),[A,L]=(0,r.useState)(null),[F,P]=(0,r.useState)(!1),[O,q]=(0,r.useState)(!1),[z,B]=(0,r.useState)(!1),[_,U]=(0,r.useState)(!1),[V,G]=(0,r.useState)(""),[H,Y]=(0,r.useState)(0),[J,R]=(0,r.useState)(null),[X,W]=(0,r.useState)(""),[$,K]=(0,r.useState)(""),[Q,ee]=(0,r.useState)(null),[es,et]=(0,r.useState)([]),[ea,er]=(0,r.useState)("");(0,r.useEffect)(()=>{if(!localStorage.getItem("adminToken")){window.location.href="/admin/login";return}},[]),(0,r.useEffect)(()=>{(async()=>{await Promise.all([el(),en(),ei()]),n(!1)})();let e=setInterval(()=>{el()},1e4),s=setInterval(()=>{ei()},3e4),t=setInterval(()=>{en()},6e4);return()=>{clearInterval(e),clearInterval(s),clearInterval(t)}},[]);let el=async()=>{try{let e=localStorage.getItem("adminToken"),s=await fetch("/api/admin/bookings",{headers:{"x-admin-token":e||""}});if(s.ok){let e=await s.json();N(e.bookings),e.bookings.length>H&&H>0&&alert("Нова резервация! Общо: ".concat(e.bookings.length)),Y(e.bookings.length)}}catch(e){console.error("Error loading bookings:",e)}},en=async()=>{try{let e=localStorage.getItem("adminToken"),s=await fetch("/api/admin/services",{headers:{"x-admin-token":e||""}});if(s.ok){let e=await s.json();k(e.services)}}catch(e){console.error("Error loading services:",e)}},ei=async()=>{try{let e=localStorage.getItem("adminToken"),s=await fetch("/api/admin/users",{headers:{"x-admin-token":e||""}});if(s.ok){let e=await s.json();Z(e.users)}}catch(e){console.error("Error loading users:",e)}},ec=async(e,s)=>{try{let t=localStorage.getItem("adminToken");(await fetch("/api/admin/bookings",{method:"PUT",headers:{"Content-Type":"application/json","x-admin-token":t||""},body:JSON.stringify({id:e,status:s})})).ok?N(t=>t.map(t=>t.id===e?{...t,status:s}:t)):console.error("Failed to update booking status")}catch(e){console.error("Error updating booking status:",e)}},ed=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},eo=e=>{let s=w.find(s=>s.id.toString()===e);return s?s.name:e},em=async e=>{try{let s=localStorage.getItem("adminToken");(await fetch("/api/admin/services",{method:M?"PUT":"POST",headers:{"Content-Type":"application/json","x-admin-token":s||""},body:JSON.stringify(M?{...e,id:M.id}:e)})).ok?(en(),q(!1),I(null)):console.error("Failed to save service")}catch(e){console.error("Error saving service:",e)}},ex=async e=>{if(confirm("Сигурни ли сте, че искате да изтриете тази услуга?"))try{let s=localStorage.getItem("adminToken");(await fetch("/api/admin/services?id=".concat(e),{method:"DELETE",headers:{"x-admin-token":s||""}})).ok?en():console.error("Failed to delete service")}catch(e){console.error("Error deleting service:",e)}},eh=async e=>{try{let s=localStorage.getItem("adminToken");(await fetch("/api/admin/bookings",{method:"PUT",headers:{"Content-Type":"application/json","x-admin-token":s||""},body:JSON.stringify({id:null==T?void 0:T.id,...e})})).ok?(el(),P(!1),E(null),Q&&(R(Q),ee(null))):console.error("Failed to update booking")}catch(e){console.error("Error updating booking:",e)}},eu=async(e,s)=>{try{let t=localStorage.getItem("adminToken"),a=await fetch("/api/admin/bookings",{method:"PUT",headers:{"Content-Type":"application/json","x-admin-token":t||""},body:JSON.stringify({id:e,treatment_notes:s})});if(a.ok)el();else{let e=await a.json();alert(e.error||"Грешка при обновяване на бележките")}}catch(e){console.error("Error updating treatment notes:",e),alert("Грешка при обновяване на бележките")}},ep=e=>{E({id:"",name:"",phone:"",service:"",date:ea,time:e,status:"pending",createdAt:new Date().toISOString()}),P(!0),et([]),er("")},eg=S.filter(e=>{let s=X.toLowerCase();return e.name.toLowerCase().includes(s)||e.phone.toLowerCase().includes(s)||e.email&&e.email.toLowerCase().includes(s)}),ey=v.filter(e=>{let s=$.toLowerCase();return e.name.toLowerCase().includes(s)||e.phone.toLowerCase().includes(s)||e.email&&e.email.toLowerCase().includes(s)||e.date.toLowerCase().includes(s)||e.time.toLowerCase().includes(s)||eo(e.service).toLowerCase().includes(s)}),eb=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)){alert("Гласовото разпознаване не се поддържа на iOS устройства. Моля, използвайте компютър или Android устройство.");return}let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){alert("Гласовото разпознаване не се поддържа в този браузър. Моля, използвайте Chrome или Edge.");return}try{let s=new e;s.continuous=!1,s.interimResults=!1,s.lang="bg-BG",s.onstart=()=>{U(!0),G("Говорете сега...")},s.onresult=async e=>{let s=e.results[0][0].transcript;console.log("Voice transcript:",s),G('Разбрах: "'.concat(s,'"'));try{let e=localStorage.getItem("adminToken"),t=await fetch("/api/admin/voice-commands",{method:"POST",headers:{"Content-Type":"application/json","x-admin-token":e||""},body:JSON.stringify({voiceCommand:s})}),a=await t.json();console.log("API response:",a),a.success?(G(a.message),a.result&&a.result.availableSlots?(et(a.result.availableSlots),er(a.result.targetDate)):(et([]),er("")),el(),ei(),en()):(G("Грешка: ".concat(a.message)),et([]),er(""))}catch(e){console.error("Voice command error:",e),G("Грешка при обработка на командата")}},s.onerror=e=>{U(!1),console.error("Speech recognition error:",e.error);let s="Грешка при разпознаване на гласа";"not-allowed"===e.error?s="Няма разрешение за достъп до микрофона. Моля, разрешете достъпа.":"no-speech"===e.error?s="Не се разпозна глас. Моля, опитайте отново.":"network"===e.error&&(s="Грешка в мрежата. Моля, проверете интернет връзката."),G(s)},s.onend=()=>{U(!1)},s.start()}catch(e){console.error("Error starting speech recognition:",e),G("Грешка при стартиране на гласовото разпознаване")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 shadow-lg",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4 py-4 sm:py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:(0,a.jsx)(l.Z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white",children:"Админ Панел"}),(0,a.jsx)("p",{className:"text-blue-100 text-xs sm:text-sm hidden sm:block",children:"Управление на резервации и потребители"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:hidden",children:[(0,a.jsx)("button",{onClick:eb,disabled:_,className:"p-2 rounded-lg transition-all duration-200 ".concat(_?"bg-red-500 text-white animate-pulse":"bg-white/20 text-white hover:bg-white/30"),children:_?(0,a.jsx)(i,{className:"w-4 h-4"}):(0,a.jsx)(c,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("adminToken"),window.location.href="/admin/login"},className:"p-2 text-blue-100 hover:text-white transition-colors",children:(0,a.jsx)(d,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"hidden sm:flex flex-col items-center space-y-3",children:[(0,a.jsxs)("button",{onClick:eb,disabled:_,className:"flex items-center space-x-3 px-6 py-3 rounded-xl text-sm font-semibold transition-all duration-200 shadow-lg ".concat(_?"bg-red-500 text-white shadow-red-500/25 animate-pulse":"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm hover:scale-105"),children:[_?(0,a.jsx)(i,{className:"w-5 h-5"}):(0,a.jsx)(c,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:_?"Спиране...":"Гласова команда"})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("button",{className:"text-blue-100 hover:text-white text-xs underline",children:"Примери за команди"}),(0,a.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-80 sm:w-96 bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Гласови команди:"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-600 text-sm",children:"Резервации:"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:'"запази ми час за Иван Иванов за 24 август от 10 часа за почистване на зъби"'})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-600 text-sm",children:"Потребители:"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:'"добави потребител Иван Иванов телефон 0881234567"'})]})]})]})})]})]}),(0,a.jsxs)("div",{className:"hidden sm:flex items-center justify-end space-x-4",children:[(0,a.jsxs)("a",{href:"/",className:"flex items-center space-x-2 text-blue-100 hover:text-white transition-colors",children:[(0,a.jsx)(o,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Към сайта"})]}),(0,a.jsxs)("a",{href:"/siri",className:"flex items-center space-x-2 text-blue-100 hover:text-white transition-colors",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Siri Shortcuts"})]}),(0,a.jsx)("div",{className:"h-6 w-px bg-blue-400"}),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("adminToken"),window.location.href="/admin/login"},className:"flex items-center space-x-2 text-blue-100 hover:text-white transition-colors",children:[(0,a.jsx)(d,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Изход"})]})]})]})})}),t&&(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Зареждане на админ панела..."})]})}),!t&&(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:[V&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(c,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsx)("p",{className:"text-blue-800 font-medium",children:V})]}),es.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Кликнете на час за създаване на резервация:"}),(0,a.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-2",children:es.map((e,s)=>(0,a.jsx)("button",{onClick:()=>ep(e),className:"px-3 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-colors duration-200",children:e},s))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Общо резервации"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:v.length})]}),(0,a.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg",children:(0,a.jsx)(l.Z,{className:"w-6 h-6 text-blue-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Потвърдени"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:v.filter(e=>"confirmed"===e.status).length})]}),(0,a.jsx)("div",{className:"p-3 bg-green-50 rounded-lg",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-green-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Чакащи"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:v.filter(e=>"pending"===e.status).length})]}),(0,a.jsx)("div",{className:"p-3 bg-yellow-50 rounded-lg",children:(0,a.jsx)(h,{className:"w-6 h-6 text-yellow-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Потребители"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:S.length})]}),(0,a.jsx)("div",{className:"p-3 bg-purple-50 rounded-lg",children:(0,a.jsx)(u.Z,{className:"w-6 h-6 text-purple-600"})})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-8",children:(0,a.jsxs)("div",{className:"p-1",children:[(0,a.jsx)("div",{className:"sm:hidden overflow-x-auto scrollbar-hide",children:(0,a.jsxs)("nav",{className:"flex space-x-1 min-w-max",children:[(0,a.jsx)("button",{onClick:()=>{s("bookings"),localStorage.setItem("adminActiveTab","bookings")},className:"flex-shrink-0 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 min-w-[120px] ".concat("bookings"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Резервации"})]})}),(0,a.jsx)("button",{onClick:()=>{s("calendar"),localStorage.setItem("adminActiveTab","calendar")},className:"flex-shrink-0 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 min-w-[120px] ".concat("calendar"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Календар"})]})}),(0,a.jsx)("button",{onClick:()=>{s("users"),localStorage.setItem("adminActiveTab","users")},className:"flex-shrink-0 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 min-w-[120px] ".concat("users"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Потребители"})]})}),(0,a.jsx)("button",{onClick:()=>{s("services"),localStorage.setItem("adminActiveTab","services")},className:"flex-shrink-0 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 min-w-[120px] ".concat("services"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(h,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Услуги"})]})})]})}),(0,a.jsxs)("nav",{className:"hidden sm:flex space-x-1",children:[(0,a.jsx)("button",{onClick:()=>{s("bookings"),localStorage.setItem("adminActiveTab","bookings")},className:"flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ".concat("bookings"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Резервации"})]})}),(0,a.jsx)("button",{onClick:()=>{s("calendar"),localStorage.setItem("adminActiveTab","calendar")},className:"flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ".concat("calendar"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Календар"})]})}),(0,a.jsx)("button",{onClick:()=>{s("users"),localStorage.setItem("adminActiveTab","users")},className:"flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ".concat("users"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Потребители"})]})}),(0,a.jsx)("button",{onClick:()=>{s("services"),localStorage.setItem("adminActiveTab","services")},className:"flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ".concat("services"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(h,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Услуги"})]})})]})]})}),"bookings"===e&&!t&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Резервации"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:$?"".concat(ey.length," от ").concat(v.length," резервации"):"".concat(v.length," резервации")})]}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:(0,a.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[(0,a.jsx)("input",{type:"text",placeholder:"Търси по име, телефон, имейл, дата, час или услуга...",value:$,onChange:e=>K(e.target.value),className:"w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),$&&(0,a.jsx)("button",{onClick:()=>K(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"✕"})]})})]}),(0,a.jsx)("div",{className:"block sm:hidden",children:(0,a.jsx)("div",{className:"space-y-3 p-4",children:ey.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.phone}),e.email&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),e.userName&&e.userName!==e.name&&(0,a.jsxs)("p",{className:"text-xs text-blue-600",children:["Потребител: ",e.userName]})]}),(0,a.jsxs)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(ed(e.status)),children:["pending"===e.status&&"Чакаща","confirmed"===e.status&&"Потвърдена","cancelled"===e.status&&"Отменена"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Услуга"}),(0,a.jsx)("p",{className:"font-medium",children:eo(e.service)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Дата & Час"}),(0,a.jsx)("p",{className:"font-medium",children:new Date(e.date).toLocaleDateString("bg-BG")}),(0,a.jsx)("p",{className:"text-gray-600",children:e.time})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-3 border-t border-gray-200",children:[(0,a.jsx)("button",{onClick:()=>{E(e),P(!0)},className:"text-blue-600 hover:text-blue-900 p-2 rounded-md hover:bg-blue-50",children:(0,a.jsx)(p,{className:"w-4 h-4"})}),"confirmed"===e.status&&(0,a.jsx)("button",{onClick:()=>ec(e.id,"cancelled"),className:"text-red-600 hover:text-red-900 p-2 rounded-md hover:bg-red-50",children:(0,a.jsx)(g,{className:"w-4 h-4"})}),"pending"===e.status&&(0,a.jsx)("button",{onClick:()=>ec(e.id,"confirmed"),className:"text-green-600 hover:text-green-900 p-2 rounded-md hover:bg-green-50",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})})]})]},e.id))})}),(0,a.jsx)("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Пациент"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Услуга"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Дата & Час"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ey.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.phone}),e.email&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),e.userName&&e.userName!==e.name&&(0,a.jsxs)("div",{className:"text-xs text-blue-600",children:["Потребител: ",e.userName]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:eo(e.service)})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.date).toLocaleDateString("bg-BG")}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.time})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(ed(e.status)),children:["pending"===e.status&&"Чакаща","confirmed"===e.status&&"Потвърдена","cancelled"===e.status&&"Отменена"]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{E(e),P(!0)},className:"text-primary-600 hover:text-primary-900",children:(0,a.jsx)(p,{className:"w-4 h-4"})}),"confirmed"===e.status&&(0,a.jsx)("button",{onClick:()=>ec(e.id,"cancelled"),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(g,{className:"w-4 h-4"})}),"pending"===e.status&&(0,a.jsx)("button",{onClick:()=>ec(e.id,"confirmed"),className:"text-green-600 hover:text-green-900",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]}),"calendar"===e&&!t&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Календар на резервациите"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Преглед и управление на резервациите по дни"})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(C,{bookings:v,onBookingClick:e=>{E(e),P(!0)}})})]}),"services"===e&&!t&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Услуги"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Управление на стоматологичните услуги"})]}),(0,a.jsxs)("button",{onClick:()=>{I(null),q(!0)},className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors w-full sm:w-auto justify-center",children:[(0,a.jsx)(y,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Добави услуга"})]})]}),(0,a.jsx)("div",{className:"block sm:hidden",children:(0,a.jsx)("div",{className:"space-y-3 p-4",children:w.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Активна":"Неактивна"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Продължителност"}),(0,a.jsxs)("p",{className:"font-medium",children:[e.duration," мин."]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Цена"}),(0,a.jsx)("p",{className:"font-medium",children:e.price?"".concat(e.price," лв."):"-"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-3 border-t border-gray-200",children:[(0,a.jsx)("button",{onClick:()=>{I(e),q(!0)},className:"text-blue-600 hover:text-blue-900 p-2 rounded-md hover:bg-blue-50",children:(0,a.jsx)(p,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>ex(e.id),className:"text-red-600 hover:text-red-900 p-2 rounded-md hover:bg-red-50",children:(0,a.jsx)(g,{className:"w-4 h-4"})})]})]},e.id))})}),(0,a.jsx)("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Услуга"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Описание"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Продължителност"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Цена"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.description||"-"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[e.duration," мин."]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.price?"".concat(e.price," лв."):"-"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Активна":"Неактивна"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{I(e),q(!0)},className:"text-blue-600 hover:text-blue-900",children:(0,a.jsx)(p,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>ex(e.id),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(g,{className:"w-4 h-4"})})]})})]},e.id))})]})})]}),"users"===e&&!t&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Потребители"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:X?"".concat(eg.length," от ").concat(S.length," потребители"):"".concat(S.length," потребители")})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[(0,a.jsx)("input",{type:"text",placeholder:"Търси по име, телефон или имейл...",value:X,onChange:e=>W(e.target.value),className:"w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),X&&(0,a.jsx)("button",{onClick:()=>W(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,a.jsxs)("button",{onClick:()=>B(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors w-full sm:w-auto justify-center",children:[(0,a.jsx)(y,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Добави потребител"})]})]})]}),(0,a.jsx)("div",{className:"block sm:hidden",children:(0,a.jsx)("div",{className:"space-y-3 p-4",children:eg.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.phone}),e.email&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]})}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-3",children:["Създаден: ",new Date(e.createdAt).toLocaleDateString("bg-BG")]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-3 border-t border-gray-200",children:[(0,a.jsx)("button",{onClick:()=>{L(e),B(!0)},className:"text-blue-600 hover:text-blue-900 p-2 rounded-md hover:bg-blue-50",children:(0,a.jsx)(p,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:async()=>{if(confirm("Сигурни ли сте, че искате да изтриете потребителя ".concat(e.name,"?")))try{let s=localStorage.getItem("adminToken"),t=await fetch("/api/admin/users?id=".concat(e.id),{method:"DELETE",headers:{"x-admin-token":s||""}});if(t.ok)ei();else{let e=await t.json();alert(e.error||"Грешка при изтриване на потребителя")}}catch(e){console.error("Error deleting user:",e),alert("Грешка при изтриване на потребителя")}},className:"text-red-600 hover:text-red-900 p-2 rounded-md hover:bg-red-50",children:(0,a.jsx)(g,{className:"w-4 h-4"})})]})]},e.id))})}),(0,a.jsx)("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Име"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Имейл"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Телефон"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Създаден на"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:eg.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phone}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.createdAt}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>R(e),className:"text-green-600 hover:text-green-900",title:"История на резервациите",children:(0,a.jsx)(l.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{L(e),B(!0)},className:"text-blue-600 hover:text-blue-900",title:"Редактирай",children:(0,a.jsx)(p,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:async()=>{if(confirm("Сигурни ли сте, че искате да изтриете потребителя ".concat(e.name,"?")))try{let s=localStorage.getItem("adminToken"),t=await fetch("/api/admin/users?id=".concat(e.id),{method:"DELETE",headers:{"x-admin-token":s||""}});if(t.ok)ei();else{let e=await t.json();alert(e.error||"Грешка при изтриване на потребителя")}}catch(e){console.error("Error deleting user:",e),alert("Грешка при изтриване на потребителя")}},className:"text-red-600 hover:text-red-900",title:"Изтрий",children:(0,a.jsx)(g,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})]}),F&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-4 sm:top-10 mx-auto p-4 sm:p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white m-4",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:T?"Редактирай резервация":"Нова резервация"}),(0,a.jsx)(j,{booking:T,onSubmit:eh,onCancel:()=>{P(!1),E(null),Q&&(R(Q),ee(null))}})]})})}),O&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-4 sm:top-20 mx-auto p-4 sm:p-5 border w-full max-w-md shadow-lg rounded-md bg-white m-4",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:M?"Редактирай услуга":"Добави услуга"}),(0,a.jsx)(b,{service:M,onSubmit:em,onCancel:()=>{q(!1),I(null)}})]})})}),z&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-4 sm:top-20 mx-auto p-4 sm:p-5 border w-full max-w-md shadow-lg rounded-md bg-white m-4",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:A?"Редактирай потребител":"Добави потребител"}),(0,a.jsx)(f,{user:A,onSubmit:async e=>{try{let s=localStorage.getItem("adminToken");(await fetch("/api/admin/users",{method:A?"PUT":"POST",headers:{"Content-Type":"application/json","x-admin-token":s||""},body:JSON.stringify(A?{...e,id:A.id}:e)})).ok?(ei(),B(!1),L(null)):console.error("Failed to save user")}catch(e){console.error("Error saving user:",e)}},onCancel:()=>{B(!1),L(null)}})]})})}),J&&(0,a.jsx)(D,{user:J,bookings:v,onClose:()=>R(null),onUpdateTreatmentNotes:eu,onEditBooking:e=>{E(e),P(!0),ee(J)}})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=6792)}),_N_E=e.O()}]);