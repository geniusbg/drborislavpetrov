(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6599:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),t(4753),t(2029),t(5866);var a=t(3191),r=t(8716),l=t(7922),i=t.n(l),n=t(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4753)),"C:\\Users\\genius\\Downloads\\drborislavpetrov\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"C:\\Users\\genius\\Downloads\\drborislavpetrov\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\genius\\Downloads\\drborislavpetrov\\src\\app\\admin\\page.tsx"],m="/admin/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8870:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},833:()=>{},6858:(e,s,t)=>{Promise.resolve().then(t.bind(t,4752))},6557:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var a=t(7577),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,s)=>{let t=(0,a.forwardRef)(({color:t="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:d,children:c,...o},m)=>(0,a.createElement)("svg",{ref:m,...r,width:i,height:i,stroke:t,strokeWidth:d?24*Number(n)/Number(i):n,className:`lucide lucide-${l(e)}`,...o},[...s.map(([e,s])=>(0,a.createElement)(e,s)),...(Array.isArray(c)?c:[c])||[]]));return t.displayName=`${e}`,t}},7358:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},8998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5932:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2887:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3495:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},9635:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4061:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},4019:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4752:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var a=t(326),r=t(7577),l=t(7358),i=t(6557);let n=(0,i.Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),d=(0,i.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),c=(0,i.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var o=t(3495);let m=(0,i.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var x=t(8998);let h=(0,i.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var u=t(4061);let p=(0,i.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),g=(0,i.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),y=(0,i.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),b=({service:e,onSubmit:s,onCancel:t})=>{let[l,i]=(0,r.useState)({name:e?.name||"",description:e?.description||"",duration:e?.duration||30,price:e?.price||0,isActive:e?.isActive??!0});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(l)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Име на услугата"}),a.jsx("input",{type:"text",value:l.name,onChange:e=>i({...l,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Описание"}),a.jsx("textarea",{value:l.description,onChange:e=>i({...l,description:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",rows:3})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Продължителност (минути)"}),a.jsx("input",{type:"number",value:l.duration,onChange:e=>i({...l,duration:parseInt(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",min:"15",step:"15",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Цена (лв.)"}),a.jsx("input",{type:"number",value:l.price,onChange:e=>i({...l,price:parseFloat(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",min:"0",step:"0.01"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:l.isActive,onChange:e=>i({...l,isActive:e.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),a.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Активна услуга"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Отказ"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:e?"Запази":"Добави"})]})]})},j=({booking:e,onSubmit:s,onCancel:t})=>{let[l,i]=(0,r.useState)([]),[n,d]=(0,r.useState)({name:e?.name||"",email:e?.email||"",phone:e?.phone||"",service:e?.service||"",date:e?.date||"",time:e?.time||"",message:e?.message||"",status:e?.status||"pending"});return(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/services");if(e.ok){let s=await e.json();i(s.services)}}catch(e){console.error("Error loading services:",e)}})()},[]),(0,r.useEffect)(()=>{e?d({name:e.name||"",email:e.email||"",phone:e.phone||"",service:e.service||"",date:e.date||"",time:e.time||"",message:e.message||"",status:e.status||"pending"}):d({name:"",email:"",phone:"",service:"",date:"",time:"",message:"",status:"pending"})},[e]),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(n)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Име *"}),a.jsx("input",{type:"text",value:n.name,onChange:e=>d({...n,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Телефон *"}),a.jsx("input",{type:"tel",value:n.phone,onChange:e=>d({...n,phone:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Имейл"}),a.jsx("input",{type:"email",value:n.email,onChange:e=>d({...n,email:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Услуга *"}),(0,a.jsxs)("select",{value:n.service,onChange:e=>d({...n,service:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0,children:[a.jsx("option",{value:"",children:"Изберете услуга"}),l.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.duration," мин.)"]},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Статус"}),(0,a.jsxs)("select",{value:n.status,onChange:e=>d({...n,status:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"pending",children:"Чакаща"}),a.jsx("option",{value:"confirmed",children:"Потвърдена"}),a.jsx("option",{value:"cancelled",children:"Отменена"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Дата *"}),a.jsx("input",{type:"date",value:n.date,onChange:e=>d({...n,date:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Час *"}),a.jsx("input",{type:"time",value:n.time,onChange:e=>d({...n,time:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Съобщение"}),a.jsx("textarea",{value:n.message,onChange:e=>d({...n,message:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",rows:3})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Отказ"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Запази"})]})]})},f=({user:e,onSubmit:s,onCancel:t})=>{let[l,i]=(0,r.useState)({name:"",email:"",phone:"",address:"",notes:""});(0,r.useEffect)(()=>{e&&i(e)},[e]);let n=e=>{let{name:s,value:t}=e.target;i(e=>({...e,[s]:t}))};return a.jsx("div",{className:"space-y-4",children:(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!l.name.trim()||!l.phone.trim()){alert("Името и телефонът са задължителни!");return}s(l)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Име *"}),a.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:n,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Имейл"}),a.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефон *"}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:l.phone,onChange:n,required:!0,placeholder:"+359888123456",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Адрес"}),a.jsx("textarea",{id:"address",name:"address",value:l.address,onChange:n,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Бележки"}),a.jsx("textarea",{id:"notes",name:"notes",value:l.notes,onChange:n,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Отказ"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:e?"Запази":"Добави"})]})]})})},v=(0,i.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),N=(0,i.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var w=t(9635),k=t(2887);let C=({bookings:e,onBookingClick:s,onNewBooking:t})=>{let[i,n]=(0,r.useState)(new Date),[d,c]=(0,r.useState)(null),[o,m]=(0,r.useState)("all"),h=e.filter(e=>"all"===o||e.status===o),u=new Date(i.getFullYear(),i.getMonth(),1),p=new Date(i.getFullYear(),i.getMonth()+1,0),g=new Date(u),y=u.getDay();g.setDate(g.getDate()-(0===y?6:y-1));let b=new Date(p),j=p.getDay();b.setDate(b.getDate()+(0===j?0:7-j));let f=[],C=new Date(g);for(;C<=b;)f.push(new Date(C)),C.setDate(C.getDate()+1);let S=h.reduce((e,s)=>{let t=s.date;return e[t]||(e[t]=[]),e[t].push(s),e},{}),Z=e=>{let s=new Date;return e.toDateString()===s.toDateString()},D=e=>e.getMonth()===i.getMonth(),T=e=>(S[e.toISOString().split("T")[0]]||[]).sort((e,s)=>e.time.localeCompare(s.time)),P=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},$=e=>{switch(e){case"confirmed":return"Потвърдена";case"pending":return"Чакаща";case"cancelled":return"Отменена";default:return e}};return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(l.Z,{className:"w-6 h-6 text-blue-600"}),(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:[["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"][i.getMonth()]," ",i.getFullYear()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Филтър:"}),(0,a.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Всички"}),a.jsx("option",{value:"pending",children:"Чакащи"}),a.jsx("option",{value:"confirmed",children:"Потвърдени"}),a.jsx("option",{value:"cancelled",children:"Отменени"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>n(new Date(i.getFullYear(),i.getMonth()-1)),className:"p-2 rounded-lg hover:bg-gray-100",children:a.jsx(v,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>n(new Date),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Днес"}),a.jsx("button",{onClick:()=>n(new Date(i.getFullYear(),i.getMonth()+1)),className:"p-2 rounded-lg hover:bg-gray-100",children:a.jsx(N,{className:"w-5 h-5"})})]})]})]}),(0,a.jsxs)("div",{className:"mb-6 grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Общо резервации"}),a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:h.length})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm text-yellow-600 font-medium",children:"Чакащи"}),a.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:h.filter(e=>"pending"===e.status).length})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Потвърдени"}),a.jsx("div",{className:"text-2xl font-bold text-green-900",children:h.filter(e=>"confirmed"===e.status).length})]}),(0,a.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Отменени"}),a.jsx("div",{className:"text-2xl font-bold text-red-900",children:h.filter(e=>"cancelled"===e.status).length})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[["Пн","Вт","Ср","Чт","Пт","Сб","Нд"].map(e=>a.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:e},e)),f.map((e,r)=>{let l=T(e),i=d&&e.toDateString()===d.toDateString();return(0,a.jsxs)("div",{className:`
                min-h-[120px] p-2 border border-gray-200 cursor-pointer hover:bg-gray-50
                ${Z(e)?"bg-blue-50 border-blue-300":""}
                ${D(e)?"":"text-gray-400"}
                ${i?"bg-blue-100 border-blue-400":""}
              `,onClick:()=>c(e),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("div",{className:"text-sm font-medium",children:e.getDate()}),t&&a.jsx("button",{onClick:s=>{s.stopPropagation(),t(e.toISOString().split("T")[0])},className:"text-gray-400 hover:text-primary-600 hover:bg-primary-50 rounded-full p-1 transition-colors",title:"Добави резервация",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[l.slice(0,3).map(e=>(0,a.jsxs)("div",{className:`
                      text-xs p-1 rounded border cursor-pointer hover:opacity-80
                      ${P(e.status)}
                    `,onClick:t=>{t.stopPropagation(),s(e)},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(x.Z,{className:"w-3 h-3"}),a.jsx("span",{className:"font-medium",children:e.time})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(w.Z,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate",children:e.name})]}),a.jsx("div",{className:"text-xs opacity-75",children:$(e.status)})]},e.id)),l.length>3&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["+",l.length-3," още"]})]})]},r)})]}),d&&(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["Резервации за ",d.toLocaleDateString("bg-BG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),t&&a.jsx("button",{onClick:()=>t(d.toISOString().split("T")[0]),className:"bg-primary-600 text-white px-3 py-1 rounded-md text-sm hover:bg-primary-700",children:"+ Нова резервация"})]}),0===T(d).length?a.jsx("p",{className:"text-gray-500",children:"Няма резервации за този ден"}):a.jsx("div",{className:"space-y-2",children:T(d).map(e=>(0,a.jsxs)("div",{className:`
                    p-3 rounded-lg border cursor-pointer hover:shadow-md transition-shadow
                    ${P(e.status)}
                  `,onClick:()=>s(e),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(x.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:e.time})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded ${P(e.status)}`,children:$(e.status)})]}),(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(w.Z,{className:"w-4 h-4"}),a.jsx("span",{children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(k.Z,{className:"w-4 h-4"}),a.jsx("span",{children:e.phone})]}),a.jsx("div",{className:"text-sm opacity-75",children:e.serviceName||e.service})]})]},e.id))})]})]})};var S=t(5932),Z=t(4019);let D=(0,i.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),T=({user:e,bookings:s,onClose:t,onUpdateTreatmentNotes:i,onEditBooking:n})=>{let[d,c]=(0,r.useState)(null),[o,m]=(0,r.useState)(""),h=s.filter(s=>s.phone===e.phone),u=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},g=e=>{switch(e){case"confirmed":return"Потвърдена";case"pending":return"Чакаща";case"cancelled":return"Отменена";default:return e}},y=e=>{c(e.id),m(e.treatment_notes||"")},b=async()=>{d&&o.trim()&&(await i(d,o),c(null),m(""))},j=()=>{c(null),m("")};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(w.Z,{className:"w-6 h-6 text-blue-600"}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(k.Z,{className:"w-4 h-4"}),a.jsx("span",{children:e.phone})]}),e.email&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(S.Z,{className:"w-4 h-4"}),a.jsx("span",{children:e.email})]})]})]})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Z.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Информация за потребителя"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Име:"})," ",e.name]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Телефон:"})," ",e.phone]}),e.email&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Email:"})," ",e.email]}),e.address&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Адрес:"})," ",e.address]}),e.notes&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Бележки:"})," ",e.notes]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center space-x-2",children:[a.jsx(l.Z,{className:"w-5 h-5"}),(0,a.jsxs)("span",{children:["История на резервациите (",h.length,")"]})]}),0===h.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Няма резервации за този потребител"}):a.jsx("div",{className:"space-y-4",children:h.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(l.Z,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"font-medium",children:e.date})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(x.Z,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"font-medium",children:e.time})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(e.status)}`,children:g(e.status)})]}),n&&(0,a.jsxs)("button",{onClick:()=>n(e),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center space-x-1 px-2 py-1 rounded-md hover:bg-blue-50",title:"Редактирай резервацията",children:[a.jsx(p,{className:"w-4 h-4"}),a.jsx("span",{children:"Редактирай"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[a.jsx("span",{className:"font-medium",children:"Услуга:"})," ",e.serviceName||`Услуга ${e.service}`]}),(0,a.jsxs)("div",{className:"mb-3",children:[a.jsx("span",{className:"font-medium",children:"Статус:"}),a.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${u(e.status)}`,children:g(e.status)})]}),(0,a.jsxs)("div",{className:"mb-3 text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Създадена на:"})," ",new Date(e.createdAt).toLocaleDateString("bg-BG")," в ",new Date(e.createdAt).toLocaleTimeString("bg-BG",{hour:"2-digit",minute:"2-digit"})]}),e.message&&(0,a.jsxs)("div",{className:"mb-3",children:[a.jsx("span",{className:"font-medium",children:"Съобщение:"}),(0,a.jsxs)("p",{className:"text-gray-700 mt-1 italic",children:['"',e.message,'"']})]}),(0,a.jsxs)("div",{className:"border-t pt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium flex items-center space-x-2",children:[a.jsx(D,{className:"w-4 h-4"}),a.jsx("span",{children:"Бележки за лечението"})]}),d!==e.id&&(0,a.jsxs)("button",{onClick:()=>y(e),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center space-x-1",children:[a.jsx(p,{className:"w-4 h-4"}),a.jsx("span",{children:"Редактирай"})]})]}),d===e.id?(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("textarea",{value:o,onChange:e=>m(e.target.value),className:"w-full p-2 border rounded-md resize-none",rows:3,placeholder:"Въведете бележки за лечението..."}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:b,className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",children:"Запази"}),a.jsx("button",{onClick:j,className:"px-3 py-1 bg-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-400",children:"Отмени"})]})]}):a.jsx("div",{className:"text-gray-700",children:e.treatment_notes?a.jsx("p",{className:"whitespace-pre-wrap",children:e.treatment_notes}):a.jsx("p",{className:"text-gray-500 italic",children:"Няма бележки за лечението"})})]})]},e.id))})]})]})]})})},P=()=>{let[e,s]=(0,r.useState)(()=>"bookings"),[t,i]=(0,r.useState)(!0),[v,N]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),[S,Z]=(0,r.useState)([]),[D,P]=(0,r.useState)(null),[$,M]=(0,r.useState)(null),[E,L]=(0,r.useState)(null),[A,I]=(0,r.useState)(!1),[_,q]=(0,r.useState)(!1),[O,F]=(0,r.useState)(!1),[B,U]=(0,r.useState)(!1),[z,G]=(0,r.useState)(""),[H,V]=(0,r.useState)(0),[R,J]=(0,r.useState)(null),[Y,W]=(0,r.useState)(""),[X,K]=(0,r.useState)(""),[Q,ee]=(0,r.useState)(null),[es,et]=(0,r.useState)([]),[ea,er]=(0,r.useState)("");(0,r.useEffect)(()=>{if(!localStorage.getItem("adminToken")){window.location.href="/admin/login";return}},[]),(0,r.useEffect)(()=>{(async()=>{await Promise.all([el(),ei(),en()]),i(!1)})();let e=setInterval(()=>{el()},1e4),s=setInterval(()=>{en()},3e4),t=setInterval(()=>{ei()},6e4);return()=>{clearInterval(e),clearInterval(s),clearInterval(t)}},[]);let el=async()=>{try{let e=localStorage.getItem("adminToken"),s=await fetch("/api/admin/bookings",{headers:{"x-admin-token":e||""}});if(s.ok){let e=await s.json();N(e.bookings),e.bookings.length>H&&H>0&&alert(`Нова резервация! Общо: ${e.bookings.length}`),V(e.bookings.length)}}catch(e){console.error("Error loading bookings:",e)}},ei=async()=>{try{let e=localStorage.getItem("adminToken"),s=await fetch("/api/admin/services",{headers:{"x-admin-token":e||""}});if(s.ok){let e=await s.json();k(e.services)}}catch(e){console.error("Error loading services:",e)}},en=async()=>{try{let e=localStorage.getItem("adminToken"),s=await fetch("/api/admin/users",{headers:{"x-admin-token":e||""}});if(s.ok){let e=await s.json();Z(e.users)}}catch(e){console.error("Error loading users:",e)}},ed=async(e,s)=>{try{let t=localStorage.getItem("adminToken");(await fetch("/api/admin/bookings",{method:"PUT",headers:{"Content-Type":"application/json","x-admin-token":t||""},body:JSON.stringify({id:e,status:s})})).ok?N(t=>t.map(t=>t.id===e?{...t,status:s}:t)):console.error("Failed to update booking status")}catch(e){console.error("Error updating booking status:",e)}},ec=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},eo=e=>{let s=w.find(s=>s.id.toString()===e);return s?s.name:e},em=async e=>{try{let s=localStorage.getItem("adminToken");(await fetch("/api/admin/services",{method:$?"PUT":"POST",headers:{"Content-Type":"application/json","x-admin-token":s||""},body:JSON.stringify($?{...e,id:$.id}:e)})).ok?(ei(),q(!1),M(null)):console.error("Failed to save service")}catch(e){console.error("Error saving service:",e)}},ex=async e=>{if(confirm("Сигурни ли сте, че искате да изтриете тази услуга?"))try{let s=localStorage.getItem("adminToken");(await fetch(`/api/admin/services?id=${e}`,{method:"DELETE",headers:{"x-admin-token":s||""}})).ok?ei():console.error("Failed to delete service")}catch(e){console.error("Error deleting service:",e)}},eh=async e=>{try{let s=localStorage.getItem("adminToken");(await fetch("/api/admin/bookings",{method:"PUT",headers:{"Content-Type":"application/json","x-admin-token":s||""},body:JSON.stringify({id:D?.id,...e})})).ok?(el(),I(!1),P(null),Q&&(J(Q),ee(null))):console.error("Failed to update booking")}catch(e){console.error("Error updating booking:",e)}},eu=async(e,s)=>{try{let t=localStorage.getItem("adminToken"),a=await fetch("/api/admin/bookings",{method:"PUT",headers:{"Content-Type":"application/json","x-admin-token":t||""},body:JSON.stringify({id:e,treatment_notes:s})});if(a.ok)el();else{let e=await a.json();alert(e.error||"Грешка при обновяване на бележките")}}catch(e){console.error("Error updating treatment notes:",e),alert("Грешка при обновяване на бележките")}},ep=e=>{P({id:"",name:"",phone:"",service:"",date:ea,time:e,status:"pending",createdAt:new Date().toISOString()}),I(!0),et([]),er("")},eg=S.filter(e=>{let s=Y.toLowerCase();return e.name.toLowerCase().includes(s)||e.phone.toLowerCase().includes(s)||e.email&&e.email.toLowerCase().includes(s)}),ey=v.filter(e=>{let s=X.toLowerCase();return e.name.toLowerCase().includes(s)||e.phone.toLowerCase().includes(s)||e.email&&e.email.toLowerCase().includes(s)||e.date.toLowerCase().includes(s)||e.time.toLowerCase().includes(s)||eo(e.service).toLowerCase().includes(s)});return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center py-6 gap-4",children:[a.jsx("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:a.jsx(l.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-white",children:"Админ Панел"}),a.jsx("p",{className:"text-blue-100 text-sm",children:"Управление на резервации и потребители"})]})]})}),(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)){alert("Гласовото разпознаване не се поддържа на iOS устройства. Моля, използвайте компютър или Android устройство.");return}let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){alert("Гласовото разпознаване не се поддържа в този браузър. Моля, използвайте Chrome или Edge.");return}try{let s=new e;s.continuous=!1,s.interimResults=!1,s.lang="bg-BG",s.onstart=()=>{U(!0),G("Говорете сега...")},s.onresult=async e=>{let s=e.results[0][0].transcript;console.log("Voice transcript:",s),G(`Разбрах: "${s}"`);try{let e=localStorage.getItem("adminToken"),t=await fetch("/api/admin/voice-commands",{method:"POST",headers:{"Content-Type":"application/json","x-admin-token":e||""},body:JSON.stringify({voiceCommand:s})}),a=await t.json();console.log("API response:",a),a.success?(G(a.message),a.result&&a.result.availableSlots?(et(a.result.availableSlots),er(a.result.targetDate)):(et([]),er("")),el(),en(),ei()):(G(`Грешка: ${a.message}`),et([]),er(""))}catch(e){console.error("Voice command error:",e),G("Грешка при обработка на командата")}},s.onerror=e=>{U(!1),console.error("Speech recognition error:",e.error);let s="Грешка при разпознаване на гласа";"not-allowed"===e.error?s="Няма разрешение за достъп до микрофона. Моля, разрешете достъпа.":"no-speech"===e.error?s="Не се разпозна глас. Моля, опитайте отново.":"network"===e.error&&(s="Грешка в мрежата. Моля, проверете интернет връзката."),G(s)},s.onend=()=>{U(!1)},s.start()}catch(e){console.error("Error starting speech recognition:",e),G("Грешка при стартиране на гласовото разпознаване")}},disabled:B,className:`flex items-center space-x-3 px-6 py-3 rounded-xl text-sm font-semibold transition-all duration-200 shadow-lg ${B?"bg-red-500 text-white shadow-red-500/25 animate-pulse":"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm hover:scale-105"}`,children:[B?a.jsx(n,{className:"w-5 h-5"}):a.jsx(d,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:B?"Спиране...":"Гласова команда"})]}),(0,a.jsxs)("div",{className:"relative group",children:[a.jsx("button",{className:"text-blue-100 hover:text-white text-xs underline",children:"Примери за команди"}),a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Гласови команди:"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-green-600 text-sm",children:"Резервации:"}),a.jsx("p",{className:"text-xs text-gray-600",children:'"запази ми час за Иван Иванов за 24 август от 10 часа за почистване на зъби"'})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-blue-600 text-sm",children:"Потребители:"}),a.jsx("p",{className:"text-xs text-gray-600",children:'"добави потребител Иван Иванов телефон 0881234567"'})]})]})]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("a",{href:"/",className:"flex items-center space-x-2 text-blue-100 hover:text-white transition-colors",children:[a.jsx(c,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Към сайта"})]}),(0,a.jsxs)("a",{href:"/siri",className:"flex items-center space-x-2 text-blue-100 hover:text-white transition-colors",children:[a.jsx(o.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Siri Shortcuts"})]}),a.jsx("div",{className:"h-6 w-px bg-blue-400"}),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("adminToken"),window.location.href="/admin/login"},className:"flex items-center space-x-2 text-blue-100 hover:text-white transition-colors",children:[a.jsx(m,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Изход"})]})]})]})})}),t&&a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Зареждане на админ панела..."})]})}),!t&&(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:[z&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(d,{className:"w-5 h-5 text-blue-600"})}),a.jsx("p",{className:"text-blue-800 font-medium",children:z})]}),es.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Кликнете на час за създаване на резервация:"}),a.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-2",children:es.map((e,s)=>a.jsx("button",{onClick:()=>ep(e),className:"px-3 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-colors duration-200",children:e},s))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Общо резервации"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.length})]}),a.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:a.jsx(l.Z,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Потвърдени"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.filter(e=>"confirmed"===e.status).length})]}),a.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:a.jsx(x.Z,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Чакащи"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.filter(e=>"pending"===e.status).length})]}),a.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg",children:a.jsx(h,{className:"w-6 h-6 text-yellow-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Потребители"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:S.length})]}),a.jsx("div",{className:"p-3 bg-purple-50 rounded-lg",children:a.jsx(u.Z,{className:"w-6 h-6 text-purple-600"})})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-8",children:a.jsx("div",{className:"p-1",children:(0,a.jsxs)("nav",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>{s("bookings"),localStorage.setItem("adminActiveTab","bookings")},className:`flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${"bookings"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(l.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Резервации"})]})}),a.jsx("button",{onClick:()=>{s("calendar"),localStorage.setItem("adminActiveTab","calendar")},className:`flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${"calendar"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(l.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Календар"})]})}),a.jsx("button",{onClick:()=>{s("users"),localStorage.setItem("adminActiveTab","users")},className:`flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${"users"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(u.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Потребители"})]})}),a.jsx("button",{onClick:()=>{s("services"),localStorage.setItem("adminActiveTab","services")},className:`flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${"services"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(h,{className:"w-4 h-4"}),a.jsx("span",{children:"Услуги"})]})})]})})}),"bookings"===e&&!t&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Резервации"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:X?`${ey.length} от ${v.length} резервации`:`${v.length} резервации`})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:(0,a.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[a.jsx("input",{type:"text",placeholder:"Търси по име, телефон, имейл, дата, час или услуга...",value:X,onChange:e=>K(e.target.value),className:"w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),X&&a.jsx("button",{onClick:()=>K(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"✕"})]})})]}),a.jsx("div",{className:"block sm:hidden",children:a.jsx("div",{className:"space-y-3 p-4",children:ey.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600",children:e.phone}),e.email&&a.jsx("p",{className:"text-sm text-gray-600",children:e.email}),e.userName&&e.userName!==e.name&&(0,a.jsxs)("p",{className:"text-xs text-blue-600",children:["Потребител: ",e.userName]})]}),(0,a.jsxs)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ec(e.status)}`,children:["pending"===e.status&&"Чакаща","confirmed"===e.status&&"Потвърдена","cancelled"===e.status&&"Отменена"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Услуга"}),a.jsx("p",{className:"font-medium",children:eo(e.service)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Дата & Час"}),a.jsx("p",{className:"font-medium",children:new Date(e.date).toLocaleDateString("bg-BG")}),a.jsx("p",{className:"text-gray-600",children:e.time})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-3 border-t border-gray-200",children:[a.jsx("button",{onClick:()=>{P(e),I(!0)},className:"text-blue-600 hover:text-blue-900 p-2 rounded-md hover:bg-blue-50",children:a.jsx(p,{className:"w-4 h-4"})}),"confirmed"===e.status&&a.jsx("button",{onClick:()=>ed(e.id,"cancelled"),className:"text-red-600 hover:text-red-900 p-2 rounded-md hover:bg-red-50",children:a.jsx(g,{className:"w-4 h-4"})}),"pending"===e.status&&a.jsx("button",{onClick:()=>ed(e.id,"confirmed"),className:"text-green-600 hover:text-green-900 p-2 rounded-md hover:bg-green-50",children:a.jsx(x.Z,{className:"w-4 h-4"})})]})]},e.id))})}),a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Пациент"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Услуга"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Дата & Час"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ey.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),a.jsx("div",{className:"text-sm text-gray-500",children:e.phone}),e.email&&a.jsx("div",{className:"text-sm text-gray-500",children:e.email}),e.userName&&e.userName!==e.name&&(0,a.jsxs)("div",{className:"text-xs text-blue-600",children:["Потребител: ",e.userName]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:eo(e.service)})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:new Date(e.date).toLocaleDateString("bg-BG")}),a.jsx("div",{className:"text-sm text-gray-500",children:e.time})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ec(e.status)}`,children:["pending"===e.status&&"Чакаща","confirmed"===e.status&&"Потвърдена","cancelled"===e.status&&"Отменена"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>{P(e),I(!0)},className:"text-primary-600 hover:text-primary-900",children:a.jsx(p,{className:"w-4 h-4"})}),"confirmed"===e.status&&a.jsx("button",{onClick:()=>ed(e.id,"cancelled"),className:"text-red-600 hover:text-red-900",children:a.jsx(g,{className:"w-4 h-4"})}),"pending"===e.status&&a.jsx("button",{onClick:()=>ed(e.id,"confirmed"),className:"text-green-600 hover:text-green-900",children:a.jsx(x.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]}),"calendar"===e&&!t&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Календар на резервациите"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Преглед и управление на резервациите по дни"})]}),a.jsx("div",{className:"p-6",children:a.jsx(C,{bookings:v,onBookingClick:e=>{P(e),I(!0)},onNewBooking:e=>{P({id:"",name:"",phone:"",service:"",date:e,time:"",status:"pending",createdAt:new Date().toISOString()}),I(!0)}})})]}),"services"===e&&!t&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Услуги"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Управление на стоматологичните услуги"})]}),(0,a.jsxs)("button",{onClick:()=>{M(null),q(!0)},className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors w-full sm:w-auto justify-center",children:[a.jsx(y,{className:"w-4 h-4"}),a.jsx("span",{children:"Добави услуга"})]})]}),a.jsx("div",{className:"block sm:hidden",children:a.jsx("div",{className:"space-y-3 p-4",children:w.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),e.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Активна":"Неактивна"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Продължителност"}),(0,a.jsxs)("p",{className:"font-medium",children:[e.duration," мин."]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Цена"}),a.jsx("p",{className:"font-medium",children:e.price?`${e.price} лв.`:"-"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-3 border-t border-gray-200",children:[a.jsx("button",{onClick:()=>{M(e),q(!0)},className:"text-blue-600 hover:text-blue-900 p-2 rounded-md hover:bg-blue-50",children:a.jsx(p,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>ex(e.id),className:"text-red-600 hover:text-red-900 p-2 rounded-md hover:bg-red-50",children:a.jsx(g,{className:"w-4 h-4"})})]})]},e.id))})}),a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Услуга"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Описание"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Продължителност"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Цена"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-900",children:e.description||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[e.duration," мин."]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:e.price?`${e.price} лв.`:"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Активна":"Неактивна"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>{M(e),q(!0)},className:"text-blue-600 hover:text-blue-900",children:a.jsx(p,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>ex(e.id),className:"text-red-600 hover:text-red-900",children:a.jsx(g,{className:"w-4 h-4"})})]})})]},e.id))})]})})]}),"users"===e&&!t&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Потребители"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Y?`${eg.length} от ${S.length} потребители`:`${S.length} потребители`})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[a.jsx("input",{type:"text",placeholder:"Търси по име, телефон или имейл...",value:Y,onChange:e=>W(e.target.value),className:"w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),Y&&a.jsx("button",{onClick:()=>W(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,a.jsxs)("button",{onClick:()=>F(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors w-full sm:w-auto justify-center",children:[a.jsx(y,{className:"w-4 h-4"}),a.jsx("span",{children:"Добави потребител"})]})]})]}),a.jsx("div",{className:"block sm:hidden",children:a.jsx("div",{className:"space-y-3 p-4",children:eg.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[a.jsx("div",{className:"flex justify-between items-start mb-3",children:(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600",children:e.phone}),e.email&&a.jsx("p",{className:"text-sm text-gray-600",children:e.email})]})}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-3",children:["Създаден: ",new Date(e.createdAt).toLocaleDateString("bg-BG")]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-3 border-t border-gray-200",children:[a.jsx("button",{onClick:()=>{L(e),F(!0)},className:"text-blue-600 hover:text-blue-900 p-2 rounded-md hover:bg-blue-50",children:a.jsx(p,{className:"w-4 h-4"})}),a.jsx("button",{onClick:async()=>{if(confirm(`Сигурни ли сте, че искате да изтриете потребителя ${e.name}?`))try{let s=localStorage.getItem("adminToken"),t=await fetch(`/api/admin/users?id=${e.id}`,{method:"DELETE",headers:{"x-admin-token":s||""}});if(t.ok)en();else{let e=await t.json();alert(e.error||"Грешка при изтриване на потребителя")}}catch(e){console.error("Error deleting user:",e),alert("Грешка при изтриване на потребителя")}},className:"text-red-600 hover:text-red-900 p-2 rounded-md hover:bg-red-50",children:a.jsx(g,{className:"w-4 h-4"})})]})]},e.id))})}),a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Име"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Имейл"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Телефон"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Създаден на"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:eg.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phone}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.createdAt}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>J(e),className:"text-green-600 hover:text-green-900",title:"История на резервациите",children:a.jsx(l.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{L(e),F(!0)},className:"text-blue-600 hover:text-blue-900",title:"Редактирай",children:a.jsx(p,{className:"w-4 h-4"})}),a.jsx("button",{onClick:async()=>{if(confirm(`Сигурни ли сте, че искате да изтриете потребителя ${e.name}?`))try{let s=localStorage.getItem("adminToken"),t=await fetch(`/api/admin/users?id=${e.id}`,{method:"DELETE",headers:{"x-admin-token":s||""}});if(t.ok)en();else{let e=await t.json();alert(e.error||"Грешка при изтриване на потребителя")}}catch(e){console.error("Error deleting user:",e),alert("Грешка при изтриване на потребителя")}},className:"text-red-600 hover:text-red-900",title:"Изтрий",children:a.jsx(g,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})]}),A&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-4 sm:top-10 mx-auto p-4 sm:p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white m-4",children:(0,a.jsxs)("div",{className:"mt-3",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:D?"Редактирай резервация":"Нова резервация"}),a.jsx(j,{booking:D,onSubmit:eh,onCancel:()=>{I(!1),P(null),Q&&(J(Q),ee(null))}})]})})}),_&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-4 sm:top-20 mx-auto p-4 sm:p-5 border w-full max-w-md shadow-lg rounded-md bg-white m-4",children:(0,a.jsxs)("div",{className:"mt-3",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:$?"Редактирай услуга":"Добави услуга"}),a.jsx(b,{service:$,onSubmit:em,onCancel:()=>{q(!1),M(null)}})]})})}),O&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-4 sm:top-20 mx-auto p-4 sm:p-5 border w-full max-w-md shadow-lg rounded-md bg-white m-4",children:(0,a.jsxs)("div",{className:"mt-3",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:E?"Редактирай потребител":"Добави потребител"}),a.jsx(f,{user:E,onSubmit:async e=>{try{let s=localStorage.getItem("adminToken");(await fetch("/api/admin/users",{method:E?"PUT":"POST",headers:{"Content-Type":"application/json","x-admin-token":s||""},body:JSON.stringify(E?{...e,id:E.id}:e)})).ok?(en(),F(!1),L(null)):console.error("Failed to save user")}catch(e){console.error("Error saving user:",e)}},onCancel:()=>{F(!1),L(null)}})]})})}),R&&a.jsx(T,{user:R,bookings:v,onClose:()=>J(null),onUpdateTreatmentNotes:eu,onEditBooking:e=>{P(e),I(!0),ee(R)}})]})}},4753:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`C:\Users\genius\Downloads\drborislavpetrov\src\app\admin\page.tsx#default`)},2029:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n,metadata:()=>i});var a=t(9510),r=t(5384),l=t.n(r);t(5023);let i={title:"Д-р Борислав Петров - Зъболекар в София",description:"Професионална зъболекарска грижа в София. Д-р Борислав Петров предлага модерни стоматологични услуги, профилактика, лечение на кариес и естетична стоматология.",keywords:"зъболекар, стоматология, София, д-р Борислав Петров, лечение на кариес, профилактика, естетична стоматология",authors:[{name:"Д-р Борислав Петров"}],creator:"Д-р Борислав Петров",publisher:"Д-р Борислав Петров",formatDetection:{email:!1,address:!1,telephone:!1},metadataBase:new URL("https://drborislavpetrov.bg"),alternates:{canonical:"/"},openGraph:{title:"Д-р Борислав Петров - Зъболекар в София",description:"Професионална зъболекарска грижа в София. Модерни стоматологични услуги и индивидуален подход.",url:"https://drborislavpetrov.bg",siteName:"Д-р Борислав Петров",locale:"bg_BG",type:"website"},twitter:{card:"summary_large_image",title:"Д-р Борислав Петров - Зъболекар в София",description:"Професионална зъболекарска грижа в София"},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}}};function n({children:e}){return(0,a.jsxs)("html",{lang:"bg",children:[(0,a.jsxs)("head",{children:[a.jsx("link",{rel:"icon",href:"/favicon.ico"}),a.jsx("link",{rel:"apple-touch-icon",href:"/apple-touch-icon.png"}),a.jsx("meta",{name:"theme-color",content:"#0284c7"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),a.jsx("body",{className:l().className,children:e})]})}},5023:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,349],()=>t(6599));module.exports=a})();