# PostgreSQL Database Choice

**Дата**: 2025-01-27  
**Статус**: Приет  
**Контекст**: Избор на база данни за зъболекарския уебсайт

## Решение

Използваме **PostgreSQL** база данни на отдалечен сървър (192.168.1.134).

## Рационалност

### Защо PostgreSQL?
1. **Надеждност** - ACID транзакции, data integrity
2. **Производителност** - оптимизиран за сложни заявки
3. **Scalability** - поддържа множество едновременни връзки
4. **JSON поддръжка** - за сложни данни като breaks в working_hours
5. **Типизиране** - строго типизирани данни

### Защо отдалечен сървър?
1. **Централизирано управление** - всички данни на едно място
2. **Backup стратегия** - автоматични backups
3. **Security** - контролиран достъп
4. **Множество инсталации** - може да се достъпва от различни места

## Конфигурация

```javascript
const pool = new Pool({
  host: '192.168.1.134',
  port: 5432,
  database: 'drborislavpetrov',
  user: 'drborislavpetrov',
  password: 'Xander123)(*',
  max: 20,
  idleTimeoutMillis: 30000,
  connectionTimeoutMillis: 10000,
})
```

## Важни бележки

### НИКОГА не превключвайте на SQLite:
- Приложението е проектирано за PostgreSQL
- JOIN логиката е специфична за PostgreSQL
- API route-овете очакват PostgreSQL типове данни

### JOIN логика:
```sql
LEFT JOIN services s ON b.service = s.id::text
```
Това е защото `bookings.service` съхранява ID като TEXT, а `services.id` е INTEGER.

## Последствия

### Положителни:
- Надеждна база данни
- Добра производителност
- Централизирано управление

### Отрицателни:
- Зависимост от отдалечен сървър
- По-сложна конфигурация
- Необходимост от мрежова връзка

## Свързани решения

- Socket.io за real-time updates
- Service Worker за offline функционалност
- Email уведомления за резервации 